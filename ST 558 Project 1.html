<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Taylor Cesarski and Trevor Lynch">

<title>ST 558 Project 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ST 558 Project 1_files/libs/clipboard/clipboard.min.js"></script>
<script src="ST 558 Project 1_files/libs/quarto-html/quarto.js"></script>
<script src="ST 558 Project 1_files/libs/quarto-html/popper.min.js"></script>
<script src="ST 558 Project 1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ST 558 Project 1_files/libs/quarto-html/anchor.min.js"></script>
<link href="ST 558 Project 1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ST 558 Project 1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ST 558 Project 1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ST 558 Project 1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ST 558 Project 1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ST 558 Project 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Taylor Cesarski and Trevor Lynch </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>This code chunk does not involve functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Read in edu_data_a using read_csv and give a local path.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>edu_data_a <span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"EDU01a.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010187N1, EDU010187N2, EDU010188N1, EDU010188...
dbl (20): EDU010187F, EDU010187D, EDU010188F, EDU010188D, EDU010189F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>edu_data_a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,198 × 42
   Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
 1 UNITED STATES 00000          0   40024299 0000        0000                 0
 2 ALABAMA       01000          0     733735 0000        0000                 0
 3 Autauga, AL   01001          0       6829 0000        0000                 0
 4 Baldwin, AL   01003          0      16417 0000        0000                 0
 5 Barbour, AL   01005          0       5071 0000        0000                 0
 6 Bibb, AL      01007          0       3557 0000        0000                 0
 7 Blount, AL    01009          0       7319 0000        0000                 0
 8 Bullock, AL   01011          0       2014 0000        0000                 0
 9 Butler, AL    01013          0       4640 0000        0000                 0
10 Calhoun, AL   01015          0      20939 0000        0000                 0
# ℹ 3,188 more rows
# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,
#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,
#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,
#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,
#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,
#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Overwrite data set. Select only columns Area_name, STCOU, and all columns ending with D. Rename the Area_name as area_name and pivot longer on columns 87-96. Then print out the dataframe.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>edu_data_a <span class="ot">&lt;-</span> edu_data_a <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Area_name, STCOU, <span class="fu">ends_with</span>(<span class="st">"D"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">area_name =</span> Area_name) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> EDU010187D<span class="sc">:</span>EDU010196D,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"time"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"enrollment"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>edu_data_a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 4
   area_name     STCOU time       enrollment
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 UNITED STATES 00000 EDU010187D   40024299
 2 UNITED STATES 00000 EDU010188D   39967624
 3 UNITED STATES 00000 EDU010189D   40317775
 4 UNITED STATES 00000 EDU010190D   40737600
 5 UNITED STATES 00000 EDU010191D   41385442
 6 UNITED STATES 00000 EDU010192D   42088151
 7 UNITED STATES 00000 EDU010193D   42724710
 8 UNITED STATES 00000 EDU010194D   43369917
 9 UNITED STATES 00000 EDU010195D   43993459
10 UNITED STATES 00000 EDU010196D   44715737
# ℹ 31,970 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a new vector called Year_Date of length 31980 because that is the number of rows in the dataset.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Year_Date <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">31980</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Loop through all rows (31980) and get the 8th and 9th characters in the string corresponding to last two years of the date. Convert to a numeric variable. Then if the number is less than 20 (such as 5), add 2000 to end up with 2005. Otherwise add 1900 to get something like 1987. Then store those values in the initialized vector called Year_Date.</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">31980</span>){</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  time_year <span class="ot">&lt;-</span> <span class="fu">substr</span>(edu_data_a<span class="sc">$</span>time[i],<span class="dv">8</span>,<span class="dv">9</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  year_numeric <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(time_year)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>year_numeric <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(year_numeric <span class="sc">&lt;</span> <span class="dv">20</span>, year_numeric <span class="sc">+</span> <span class="dv">2000</span>, year_numeric <span class="sc">+</span> <span class="dv">1900</span>) </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>Year_Date[i] <span class="ot">&lt;-</span> year_numeric</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a numeric vector called measurement that is 31980 characters. Loop through taking the 1st-7th characters and store those in the initialized measurement vector.</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>measurement <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">31980</span>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">31980</span>){</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  measurement_type <span class="ot">&lt;-</span> <span class="fu">substr</span>(edu_data_a<span class="sc">$</span>time[i], <span class="dv">1</span>, <span class="dv">7</span>)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>measurement[i] <span class="ot">&lt;-</span> measurement_type</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#Take the original data set and add columns for Year_Date and measurment as created above. Then get rid of the time variable where the strings came from because it is no longer needed.</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>edu_data_a <span class="ot">&lt;-</span> edu_data_a <span class="sc">|&gt;</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year_Date =</span> Year_Date,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">Measurement =</span> measurement) <span class="sc">|&gt;</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>time)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#Create two data sets for county and non county data. This gets the indices for where the pattern of County, DD where DD is the state holds.</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>county_indices <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">", </span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">w"</span>, edu_data_a<span class="sc">$</span>area_name)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co">#Create new dataset called county_data with all the rows in the indices above.</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>county_data <span class="ot">&lt;-</span> edu_data_a <span class="sc">|&gt;</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> county_indices)</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>county_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 5
   area_name   STCOU enrollment Year_Date Measurement
   &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      
 1 Autauga, AL 01001       6829      1987 EDU0101    
 2 Autauga, AL 01001       6900      1988 EDU0101    
 3 Autauga, AL 01001       6920      1989 EDU0101    
 4 Autauga, AL 01001       6847      1990 EDU0101    
 5 Autauga, AL 01001       7008      1991 EDU0101    
 6 Autauga, AL 01001       7137      1992 EDU0101    
 7 Autauga, AL 01001       7152      1993 EDU0101    
 8 Autauga, AL 01001       7381      1994 EDU0101    
 9 Autauga, AL 01001       7568      1995 EDU0101    
10 Autauga, AL 01001       7834      1996 EDU0101    
# ℹ 31,440 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Add a class called county.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(county_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"county"</span>, <span class="fu">class</span>(county_data))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "county"     "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create new dataset called non_county_data with all the rows not in the indices above.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>non_county_data <span class="ot">&lt;-</span> edu_data_a <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">row_number</span>() <span class="sc">%in%</span> county_indices)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>non_county_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 5
   area_name     STCOU enrollment Year_Date Measurement
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      
 1 UNITED STATES 00000   40024299      1987 EDU0101    
 2 UNITED STATES 00000   39967624      1988 EDU0101    
 3 UNITED STATES 00000   40317775      1989 EDU0101    
 4 UNITED STATES 00000   40737600      1990 EDU0101    
 5 UNITED STATES 00000   41385442      1991 EDU0101    
 6 UNITED STATES 00000   42088151      1992 EDU0101    
 7 UNITED STATES 00000   42724710      1993 EDU0101    
 8 UNITED STATES 00000   43369917      1994 EDU0101    
 9 UNITED STATES 00000   43993459      1995 EDU0101    
10 UNITED STATES 00000   44715737      1996 EDU0101    
# ℹ 520 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Add a class called state.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(non_county_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"state"</span>, <span class="fu">class</span>(non_county_data))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>state_name <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">31450</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">31450</span>){</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  state_info <span class="ot">&lt;-</span> <span class="fu">substr</span>(county_data<span class="sc">$</span>area_name[i], <span class="fu">nchar</span>(county_data<span class="sc">$</span>area_name[i]) <span class="sc">-</span><span class="dv">1</span>, <span class="fu">nchar</span>(county_data<span class="sc">$</span>area_name[i]))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>state_name[i] <span class="ot">&lt;-</span> state_info</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>county_data <span class="ot">&lt;-</span> county_data <span class="sc">|&gt;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">State_Name =</span> state_name)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>county_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 6
   area_name   STCOU enrollment Year_Date Measurement State_Name
   &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     
 1 Autauga, AL 01001       6829      1987 EDU0101     AL        
 2 Autauga, AL 01001       6900      1988 EDU0101     AL        
 3 Autauga, AL 01001       6920      1989 EDU0101     AL        
 4 Autauga, AL 01001       6847      1990 EDU0101     AL        
 5 Autauga, AL 01001       7008      1991 EDU0101     AL        
 6 Autauga, AL 01001       7137      1992 EDU0101     AL        
 7 Autauga, AL 01001       7152      1993 EDU0101     AL        
 8 Autauga, AL 01001       7381      1994 EDU0101     AL        
 9 Autauga, AL 01001       7568      1995 EDU0101     AL        
10 Autauga, AL 01001       7834      1996 EDU0101     AL        
# ℹ 31,440 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create divisions.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>non_county_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 5
   area_name     STCOU enrollment Year_Date Measurement
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      
 1 UNITED STATES 00000   40024299      1987 EDU0101    
 2 UNITED STATES 00000   39967624      1988 EDU0101    
 3 UNITED STATES 00000   40317775      1989 EDU0101    
 4 UNITED STATES 00000   40737600      1990 EDU0101    
 5 UNITED STATES 00000   41385442      1991 EDU0101    
 6 UNITED STATES 00000   42088151      1992 EDU0101    
 7 UNITED STATES 00000   42724710      1993 EDU0101    
 8 UNITED STATES 00000   43369917      1994 EDU0101    
 9 UNITED STATES 00000   43993459      1995 EDU0101    
10 UNITED STATES 00000   44715737      1996 EDU0101    
# ℹ 520 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>division <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">530</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">530</span>){</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>division[i] <span class="ot">&lt;-</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CONNECTICUT"</span>, <span class="st">"MAINE"</span>, <span class="st">"MASSACHUSETTS"</span>, <span class="st">"NEW HAMPSHIRE"</span>, <span class="st">"RHODE ISLAND"</span>, <span class="st">"VERMONT"</span>), <span class="st">"New England"</span>, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>         <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NEW JERSEY"</span>, <span class="st">"NEW YORK"</span>, <span class="st">"PENNSYLVANIA"</span>), <span class="st">"Middle Atlantic"</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ILLINOIS"</span>, <span class="st">"INDIANA"</span>, <span class="st">"MICHIGAN"</span>, <span class="st">"OHIO"</span>, <span class="st">"WISCONSIN"</span>), <span class="st">"East North Central"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IOWA"</span>, <span class="st">"KANSAS"</span>, <span class="st">"MINNESOTA"</span>, <span class="st">"MISSOURI"</span>, <span class="st">"NEBRASKA"</span>, <span class="st">"NORTH DAKOTA"</span>, <span class="st">"SOUTH DAKOTA"</span>), <span class="st">"West North Central"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DELAWARE"</span>, <span class="st">"FLORIDA"</span>, <span class="st">"GEORGIA"</span>, <span class="st">"MARYLAND"</span>, <span class="st">"NORTH CAROLINA"</span>, <span class="st">"SOUTH CAROLINA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"DISTRICT OF COLUMBIA"</span>, <span class="st">"District of Columbia"</span>, <span class="st">"WEST VIRGINIA"</span>), <span class="st">"South Atlantic"</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ALABAMA"</span>, <span class="st">"KENTUCKY"</span>, <span class="st">"MISSISSIPPI"</span>, <span class="st">"TENNESSEE"</span>), <span class="st">"East South Central"</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ARKANSAS"</span>, <span class="st">"LOUSIANA"</span>, <span class="st">"OKLAHOMA"</span>, <span class="st">"TEXAS"</span>), <span class="st">"West South Central"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                                                   <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ARIZONA"</span>, <span class="st">"COLORADO"</span>, <span class="st">"IDAHO"</span>, <span class="st">"MONTANA"</span>, <span class="st">"NEVADA"</span>, <span class="st">"NEW MEXICO"</span>, <span class="st">"UTAH"</span>, <span class="st">"WYOMING"</span>), <span class="st">"Mountain"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>                                                          <span class="fu">ifelse</span>(non_county_data<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ALASKA"</span>, <span class="st">"CALIFORNIA"</span>, <span class="st">"HAWAII"</span>, <span class="st">"OREGON"</span>, <span class="st">"WASHINGTON"</span>), <span class="st">"Pacific"</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>           <span class="st">"Error"</span>)))))))))</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>division</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Error"              "Error"              "Error"             
  [4] "Error"              "Error"              "Error"             
  [7] "Error"              "Error"              "Error"             
 [10] "Error"              "East South Central" "East South Central"
 [13] "East South Central" "East South Central" "East South Central"
 [16] "East South Central" "East South Central" "East South Central"
 [19] "East South Central" "East South Central" "Pacific"           
 [22] "Pacific"            "Pacific"            "Pacific"           
 [25] "Pacific"            "Pacific"            "Pacific"           
 [28] "Pacific"            "Pacific"            "Pacific"           
 [31] "Mountain"           "Mountain"           "Mountain"          
 [34] "Mountain"           "Mountain"           "Mountain"          
 [37] "Mountain"           "Mountain"           "Mountain"          
 [40] "Mountain"           "West South Central" "West South Central"
 [43] "West South Central" "West South Central" "West South Central"
 [46] "West South Central" "West South Central" "West South Central"
 [49] "West South Central" "West South Central" "Pacific"           
 [52] "Pacific"            "Pacific"            "Pacific"           
 [55] "Pacific"            "Pacific"            "Pacific"           
 [58] "Pacific"            "Pacific"            "Pacific"           
 [61] "Mountain"           "Mountain"           "Mountain"          
 [64] "Mountain"           "Mountain"           "Mountain"          
 [67] "Mountain"           "Mountain"           "Mountain"          
 [70] "Mountain"           "New England"        "New England"       
 [73] "New England"        "New England"        "New England"       
 [76] "New England"        "New England"        "New England"       
 [79] "New England"        "New England"        "South Atlantic"    
 [82] "South Atlantic"     "South Atlantic"     "South Atlantic"    
 [85] "South Atlantic"     "South Atlantic"     "South Atlantic"    
 [88] "South Atlantic"     "South Atlantic"     "South Atlantic"    
 [91] "South Atlantic"     "South Atlantic"     "South Atlantic"    
 [94] "South Atlantic"     "South Atlantic"     "South Atlantic"    
 [97] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[100] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[103] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[106] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[109] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[112] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[115] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[118] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[121] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[124] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[127] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[130] "South Atlantic"     "Pacific"            "Pacific"           
[133] "Pacific"            "Pacific"            "Pacific"           
[136] "Pacific"            "Pacific"            "Pacific"           
[139] "Pacific"            "Pacific"            "Mountain"          
[142] "Mountain"           "Mountain"           "Mountain"          
[145] "Mountain"           "Mountain"           "Mountain"          
[148] "Mountain"           "Mountain"           "Mountain"          
[151] "East North Central" "East North Central" "East North Central"
[154] "East North Central" "East North Central" "East North Central"
[157] "East North Central" "East North Central" "East North Central"
[160] "East North Central" "East North Central" "East North Central"
[163] "East North Central" "East North Central" "East North Central"
[166] "East North Central" "East North Central" "East North Central"
[169] "East North Central" "East North Central" "West North Central"
[172] "West North Central" "West North Central" "West North Central"
[175] "West North Central" "West North Central" "West North Central"
[178] "West North Central" "West North Central" "West North Central"
[181] "West North Central" "West North Central" "West North Central"
[184] "West North Central" "West North Central" "West North Central"
[187] "West North Central" "West North Central" "West North Central"
[190] "West North Central" "East South Central" "East South Central"
[193] "East South Central" "East South Central" "East South Central"
[196] "East South Central" "East South Central" "East South Central"
[199] "East South Central" "East South Central" "Error"             
[202] "Error"              "Error"              "Error"             
[205] "Error"              "Error"              "Error"             
[208] "Error"              "Error"              "Error"             
[211] "New England"        "New England"        "New England"       
[214] "New England"        "New England"        "New England"       
[217] "New England"        "New England"        "New England"       
[220] "New England"        "South Atlantic"     "South Atlantic"    
[223] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[226] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[229] "South Atlantic"     "South Atlantic"     "New England"       
[232] "New England"        "New England"        "New England"       
[235] "New England"        "New England"        "New England"       
[238] "New England"        "New England"        "New England"       
[241] "East North Central" "East North Central" "East North Central"
[244] "East North Central" "East North Central" "East North Central"
[247] "East North Central" "East North Central" "East North Central"
[250] "East North Central" "West North Central" "West North Central"
[253] "West North Central" "West North Central" "West North Central"
[256] "West North Central" "West North Central" "West North Central"
[259] "West North Central" "West North Central" "East South Central"
[262] "East South Central" "East South Central" "East South Central"
[265] "East South Central" "East South Central" "East South Central"
[268] "East South Central" "East South Central" "East South Central"
[271] "West North Central" "West North Central" "West North Central"
[274] "West North Central" "West North Central" "West North Central"
[277] "West North Central" "West North Central" "West North Central"
[280] "West North Central" "Mountain"           "Mountain"          
[283] "Mountain"           "Mountain"           "Mountain"          
[286] "Mountain"           "Mountain"           "Mountain"          
[289] "Mountain"           "Mountain"           "West North Central"
[292] "West North Central" "West North Central" "West North Central"
[295] "West North Central" "West North Central" "West North Central"
[298] "West North Central" "West North Central" "West North Central"
[301] "Mountain"           "Mountain"           "Mountain"          
[304] "Mountain"           "Mountain"           "Mountain"          
[307] "Mountain"           "Mountain"           "Mountain"          
[310] "Mountain"           "New England"        "New England"       
[313] "New England"        "New England"        "New England"       
[316] "New England"        "New England"        "New England"       
[319] "New England"        "New England"        "Middle Atlantic"   
[322] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[325] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[328] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[331] "Mountain"           "Mountain"           "Mountain"          
[334] "Mountain"           "Mountain"           "Mountain"          
[337] "Mountain"           "Mountain"           "Mountain"          
[340] "Mountain"           "Middle Atlantic"    "Middle Atlantic"   
[343] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[346] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[349] "Middle Atlantic"    "Middle Atlantic"    "South Atlantic"    
[352] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[355] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[358] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[361] "West North Central" "West North Central" "West North Central"
[364] "West North Central" "West North Central" "West North Central"
[367] "West North Central" "West North Central" "West North Central"
[370] "West North Central" "East North Central" "East North Central"
[373] "East North Central" "East North Central" "East North Central"
[376] "East North Central" "East North Central" "East North Central"
[379] "East North Central" "East North Central" "West South Central"
[382] "West South Central" "West South Central" "West South Central"
[385] "West South Central" "West South Central" "West South Central"
[388] "West South Central" "West South Central" "West South Central"
[391] "Pacific"            "Pacific"            "Pacific"           
[394] "Pacific"            "Pacific"            "Pacific"           
[397] "Pacific"            "Pacific"            "Pacific"           
[400] "Pacific"            "Middle Atlantic"    "Middle Atlantic"   
[403] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[406] "Middle Atlantic"    "Middle Atlantic"    "Middle Atlantic"   
[409] "Middle Atlantic"    "Middle Atlantic"    "New England"       
[412] "New England"        "New England"        "New England"       
[415] "New England"        "New England"        "New England"       
[418] "New England"        "New England"        "New England"       
[421] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[424] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[427] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[430] "South Atlantic"     "West North Central" "West North Central"
[433] "West North Central" "West North Central" "West North Central"
[436] "West North Central" "West North Central" "West North Central"
[439] "West North Central" "West North Central" "East South Central"
[442] "East South Central" "East South Central" "East South Central"
[445] "East South Central" "East South Central" "East South Central"
[448] "East South Central" "East South Central" "East South Central"
[451] "West South Central" "West South Central" "West South Central"
[454] "West South Central" "West South Central" "West South Central"
[457] "West South Central" "West South Central" "West South Central"
[460] "West South Central" "Mountain"           "Mountain"          
[463] "Mountain"           "Mountain"           "Mountain"          
[466] "Mountain"           "Mountain"           "Mountain"          
[469] "Mountain"           "Mountain"           "New England"       
[472] "New England"        "New England"        "New England"       
[475] "New England"        "New England"        "New England"       
[478] "New England"        "New England"        "New England"       
[481] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[484] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[487] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[490] "South Atlantic"     "Pacific"            "Pacific"           
[493] "Pacific"            "Pacific"            "Pacific"           
[496] "Pacific"            "Pacific"            "Pacific"           
[499] "Pacific"            "Pacific"            "South Atlantic"    
[502] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[505] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[508] "South Atlantic"     "South Atlantic"     "South Atlantic"    
[511] "East North Central" "East North Central" "East North Central"
[514] "East North Central" "East North Central" "East North Central"
[517] "East North Central" "East North Central" "East North Central"
[520] "East North Central" "Mountain"           "Mountain"          
[523] "Mountain"           "Mountain"           "Mountain"          
[526] "Mountain"           "Mountain"           "Mountain"          
[529] "Mountain"           "Mountain"          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>non_county_data <span class="ot">&lt;-</span> non_county_data <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Division =</span> division)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code chunk is starting to write the functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Function for steps 1 &amp; 2</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>edu_data_b <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"EDU01b.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010197N1, EDU010197N2, EDU010198N1, EDU010198...
dbl (20): EDU010197F, EDU010197D, EDU010198F, EDU010198D, EDU010199F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>education_data <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">values =</span> <span class="st">"Enrollment"</span>){</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  new_df <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Area_name, STCOU, <span class="fu">ends_with</span>(<span class="st">"D"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">area_name =</span> Area_name) <span class="sc">|&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"time"</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> values)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(new_df)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Function for Step 3</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>new_function <span class="ot">&lt;-</span> <span class="cf">function</span>(new_df){</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  Year_Date <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">31980</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">31980</span>){</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  time_year <span class="ot">&lt;-</span> <span class="fu">substr</span>(new_df<span class="sc">$</span>time[i],<span class="dv">8</span>,<span class="dv">9</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  year_numeric <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(time_year)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>year_numeric <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(year_numeric <span class="sc">&lt;</span> <span class="dv">20</span>, year_numeric <span class="sc">+</span> <span class="dv">2000</span>, year_numeric <span class="sc">+</span> <span class="dv">1900</span>) </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>Year_Date[i] <span class="ot">&lt;-</span> year_numeric</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  measurement <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">31980</span>)</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">31980</span>){</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>  measurement_type <span class="ot">&lt;-</span> <span class="fu">substr</span>(new_df<span class="sc">$</span>time[i], <span class="dv">1</span>, <span class="dv">7</span>)</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>measurement[i] <span class="ot">&lt;-</span> measurement_type</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>new_df <span class="sc">|&gt;</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year_Date =</span> Year_Date,</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">Measurement =</span> measurement) <span class="sc">|&gt;</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>time)</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>new_edu_data_b <span class="ot">&lt;-</span> <span class="fu">education_data</span>(edu_data_b)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>new_edu_data_b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 4
   area_name     STCOU time       Enrollment
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 UNITED STATES 00000 EDU010197D   44534459
 2 UNITED STATES 00000 EDU010198D   46245814
 3 UNITED STATES 00000 EDU010199D   46368903
 4 UNITED STATES 00000 EDU010200D   46818690
 5 UNITED STATES 00000 EDU010201D   47127066
 6 UNITED STATES 00000 EDU010202D   47606570
 7 UNITED STATES 00000 EDU015203D   48506317
 8 UNITED STATES 00000 EDU015204D   48693287
 9 UNITED STATES 00000 EDU015205D   48978555
10 UNITED STATES 00000 EDU015206D   49140702
# ℹ 31,970 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">new_function</span>(new_edu_data_b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 5
   area_name     STCOU Enrollment Year_Date Measurement
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      
 1 UNITED STATES 00000   44534459      1997 EDU0101    
 2 UNITED STATES 00000   46245814      1998 EDU0101    
 3 UNITED STATES 00000   46368903      1999 EDU0101    
 4 UNITED STATES 00000   46818690      2000 EDU0102    
 5 UNITED STATES 00000   47127066      2001 EDU0102    
 6 UNITED STATES 00000   47606570      2002 EDU0102    
 7 UNITED STATES 00000   48506317      2003 EDU0152    
 8 UNITED STATES 00000   48693287      2004 EDU0152    
 9 UNITED STATES 00000   48978555      2005 EDU0152    
10 UNITED STATES 00000   49140702      2006 EDU0152    
# ℹ 31,970 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Function for Step 5.</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>add_state<span class="ot">&lt;-</span> <span class="cf">function</span>(input){</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  state_name <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="fu">nrow</span>(input))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(input<span class="sc">$</span>area_name)){</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  state_info <span class="ot">&lt;-</span> <span class="fu">substr</span>(input<span class="sc">$</span>area_name[i], <span class="fu">nchar</span>(input<span class="sc">$</span>area_name[i]) <span class="sc">-</span><span class="dv">1</span>, <span class="fu">nchar</span>(input<span class="sc">$</span>area_name[i]))</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>state_name[i] <span class="ot">&lt;-</span> state_info</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(input <span class="sc">|&gt;</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">State =</span> state_name))</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Function to do Step 6</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>add_division <span class="ot">&lt;-</span> <span class="cf">function</span>(data_input){</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  division <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="fu">nrow</span>(data_input))</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(data_input<span class="sc">$</span>area_name)){</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    division[i] <span class="ot">&lt;-</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CONNECTICUT"</span>, <span class="st">"MAINE"</span>, <span class="st">"MASSACHUSETTS"</span>, <span class="st">"NEW HAMPSHIRE"</span>, <span class="st">"RHODE ISLAND"</span>, <span class="st">"VERMONT"</span>), <span class="st">"New England"</span>, </span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>         <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NEW JERSEY"</span>, <span class="st">"NEW YORK"</span>, <span class="st">"PENNSYLVANIA"</span>), <span class="st">"Middle Atlantic"</span>,</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ILLINOIS"</span>, <span class="st">"INDIANA"</span>, <span class="st">"MICHIGAN"</span>, <span class="st">"OHIO"</span>, <span class="st">"WISCONSIN"</span>), <span class="st">"East North Central"</span>,</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IOWA"</span>, <span class="st">"KANSAS"</span>, <span class="st">"MINNESOTA"</span>, <span class="st">"MISSOURI"</span>, <span class="st">"NEBRASKA"</span>, <span class="st">"NORTH DAKOTA"</span>, <span class="st">"SOUTH DAKOTA"</span>), <span class="st">"West North Central"</span>,</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DELAWARE"</span>, <span class="st">"FLORIDA"</span>, <span class="st">"GEORGIA"</span>, <span class="st">"MARYLAND"</span>, <span class="st">"NORTH CAROLINA"</span>, <span class="st">"SOUTH CAROLINA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"DISTRICT OF COLUMBIA"</span>, <span class="st">"District of Columbia"</span>, <span class="st">"WEST VIRGINIA"</span>), <span class="st">"South Atlantic"</span>,</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ALABAMA"</span>, <span class="st">"KENTUCKY"</span>, <span class="st">"MISSISSIPPI"</span>, <span class="st">"TENNESSEE"</span>), <span class="st">"East South Central"</span>,</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ARKANSAS"</span>, <span class="st">"LOUSIANA"</span>, <span class="st">"OKLAHOMA"</span>, <span class="st">"TEXAS"</span>), <span class="st">"West South Central"</span>,</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>                                                   <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ARIZONA"</span>, <span class="st">"COLORADO"</span>, <span class="st">"IDAHO"</span>, <span class="st">"MONTANA"</span>, <span class="st">"NEVADA"</span>, <span class="st">"NEW MEXICO"</span>, <span class="st">"UTAH"</span>, <span class="st">"WYOMING"</span>), <span class="st">"Mountain"</span>,</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>                                                          <span class="fu">ifelse</span>(data_input<span class="sc">$</span>area_name[i] <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ALASKA"</span>, <span class="st">"CALIFORNIA"</span>, <span class="st">"HAWAII"</span>, <span class="st">"OREGON"</span>, <span class="st">"WASHINGTON"</span>), <span class="st">"Pacific"</span>,</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>           <span class="st">"Error"</span>)))))))))</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data_input <span class="sc">|&gt;</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Division =</span> division))</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>